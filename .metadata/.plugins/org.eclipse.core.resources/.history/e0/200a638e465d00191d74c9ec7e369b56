package com.kjellvos.aletho;

import java.util.ArrayList;
import java.util.List;

public class Polymer {
	class Polymer {
	    List<Character> units = new ArrayList<Character>();

	    public Polymer(String units) {
	        for (String unit : units.split("")) {
	            this.units.add(unit.charAt(0));
	        }
	    }

	    public void reactAll() {
	        int i = 0;
	        while (i < units.size() - 1) {
	            char currentUnit = units.get(i);
	            char nextUnit = units.get(i + 1);
	            if (shouldReact(currentUnit, nextUnit)) {
	                // if there is a reaction, remove the corresponding units
	                // and go back once (to check if there are new reactions)
	                units.remove(i + 1);
	                units.remove(i);
	                if (i > 0) {i--;}
	            } else {
	                // otherwise, go on
	                i++;
	            }
	        }
	    }

	    private boolean shouldReact(char unitA, char unitB) {
	        // check if two units should react
	        if (Character.isUpperCase(unitA) != Character.isUpperCase(unitB)) {
	            if (Character.toUpperCase(unitA) == Character.toUpperCase(unitB)) {
	                return true;
	            }
	        }
	        return false;
	    }
	}
}
